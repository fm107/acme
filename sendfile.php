<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*<br />Hack&nbsp;Name:&nbsp;PHP&nbsp;Send&nbsp;File&nbsp;By&nbsp;Email<br />Hack&nbsp;URI:&nbsp;http://planetozh.com/blog/my-projects/php-send-file-by-email-sendmail-attachment/<br />Description:&nbsp;Fetch&nbsp;a&nbsp;file&nbsp;and&nbsp;send&nbsp;it&nbsp;as&nbsp;an&nbsp;email&nbsp;attachment<br />Version:&nbsp;1.0<br />Author:&nbsp;Ozh<br />Author&nbsp;URI:&nbsp;http://planetOzh.com<br />*/<br /><br />/***********************************<br />&nbsp;*&nbsp;CONFIGURE&nbsp;THE&nbsp;SCRIPT<br />&nbsp;*&nbsp;Edit&nbsp;here&nbsp;to&nbsp;suit&nbsp;your&nbsp;needs<br />&nbsp;***********************************/<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_from'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"SendMeFiles&nbsp;&lt;noreply@yourblog.com&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Who&nbsp;the&nbsp;email&nbsp;is&nbsp;from<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"File&nbsp;:&nbsp;%f&nbsp;(%s&nbsp;bytes)"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;The&nbsp;Subject&nbsp;of&nbsp;the&nbsp;email&nbsp;(%f&nbsp;will&nbsp;be&nbsp;file&nbsp;name,&nbsp;%s&nbsp;size)<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"File&nbsp;name&nbsp;:&nbsp;%f\nSize:&nbsp;%s&nbsp;bytes\nDownloaded&nbsp;from&nbsp;:&nbsp;%l\n\n%t"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Message&nbsp;along&nbsp;with&nbsp;attachment&nbsp;(%f:&nbsp;file&nbsp;name,&nbsp;%s:&nbsp;size,&nbsp;%l:&nbsp;original&nbsp;location,&nbsp;%t:&nbsp;free&nbsp;text)<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_to'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"you@yourblog.com"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Default&nbsp;value&nbsp;of&nbsp;recipient's&nbsp;email&nbsp;when&nbsp;nothing&nbsp;specified<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_dir'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"/home/user/you/sendfile/files"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Directory&nbsp;in&nbsp;which&nbsp;sent&nbsp;files&nbsp;will&nbsp;be&nbsp;mirrored&nbsp;first.&nbsp;Create&nbsp;this&nbsp;directory&nbsp;and&nbsp;chmod&nbsp;it&nbsp;777&nbsp;(make&nbsp;it&nbsp;writeable)<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_delete'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Default&nbsp;behaviour&nbsp;of&nbsp;the&nbsp;script&nbsp;once&nbsp;the&nbsp;file&nbsp;has&nbsp;been&nbsp;sent&nbsp;by&nbsp;email.&nbsp;Delete&nbsp;it&nbsp;(1)&nbsp;or&nbsp;keep&nbsp;it&nbsp;on&nbsp;server&nbsp;(0)<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_log'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"sendfile.log"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Log&nbsp;file&nbsp;in&nbsp;which&nbsp;dates&nbsp;and&nbsp;URL&nbsp;of&nbsp;files&nbsp;sent&nbsp;are&nbsp;stored<br /><br /><br />/***********************************<br />&nbsp;*&nbsp;END&nbsp;CONFIG<br />&nbsp;*&nbsp;Do&nbsp;not&nbsp;modify&nbsp;below,&nbsp;unless&nbsp;you&nbsp;know<br />&nbsp;*&nbsp;what&nbsp;you&nbsp;are&nbsp;doing<br />&nbsp;***********************************/<br /><br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'local'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'deletefile'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'deletefile'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'text'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'text'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'log'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">stripslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'log'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'action'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'action'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">html</span><span style="color: #007700">();<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">]&nbsp;and&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'action'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;p&nbsp;class="error"&gt;&lt;b&gt;ERROR&lt;/b&gt;&nbsp;:&nbsp;You&nbsp;did&nbsp;not&nbsp;specify&nbsp;any&nbsp;file&nbsp;to&nbsp;send&nbsp;!&nbsp;Try&nbsp;again&nbsp;!&lt;/p&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'action'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />}<br /><br />switch&nbsp;(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'action'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'mirror'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mirrorfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #DD0000">'send'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printform</span><span style="color: #007700">();<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">(</span><span style="color: #0000BB">$in</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;@</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #0000BB">$in</span><span style="color: #007700">]?@</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #0000BB">$in</span><span style="color: #007700">]:@</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #0000BB">$in</span><span style="color: #007700">];<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">logsend</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">=</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_log'</span><span style="color: #007700">],</span><span style="color: #DD0000">"a"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stamp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y/m/d&nbsp;G:i:s"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$msg&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$stamp</span><span style="color: #DD0000">&nbsp;:\n\tFile&nbsp;</span><span style="color: #007700">${</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n\tSent&nbsp;to&nbsp;</span><span style="color: #007700">${</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fputs</span><span style="color: #007700">(</span><span style="color: #0000BB">$log</span><span style="color: #007700">,</span><span style="color: #0000BB">$msg</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$log</span><span style="color: #007700">);<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;PREPARE&nbsp;VARIABLES&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">])&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_to'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'log'</span><span style="color: #007700">])&nbsp;print&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'log'</span><span style="color: #007700">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"info\"&gt;Sending&nbsp;file&nbsp;to&nbsp;&lt;b&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/b&gt;&nbsp;...&lt;/p&gt;"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%f'</span><span style="color: #007700">,</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s'</span><span style="color: #007700">,</span><span style="color: #0000BB">filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%f'</span><span style="color: #007700">,</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%s'</span><span style="color: #007700">,</span><span style="color: #0000BB">filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">),</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%l'</span><span style="color: #007700">,</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">],</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'%t'</span><span style="color: #007700">,</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'text'</span><span style="color: #007700">],</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;PREPARE&nbsp;MAIL&nbsp;HEADERS&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$headers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"From:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_from'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$semi_rand&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #0000BB">time</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mime_boundary&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"==Multipart_Boundary_x</span><span style="color: #007700">{</span><span style="color: #0000BB">$semi_rand</span><span style="color: #007700">}</span><span style="color: #DD0000">x"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$headers&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"\nMIME-Version:&nbsp;1.0\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Type:&nbsp;multipart/mixed;\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;boundary=\"</span><span style="color: #007700">{</span><span style="color: #0000BB">$mime_boundary</span><span style="color: #007700">}</span><span style="color: #DD0000">\""</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$email_message&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message&nbsp;in&nbsp;MIME&nbsp;format.\n\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"--</span><span style="color: #007700">{</span><span style="color: #0000BB">$mime_boundary</span><span style="color: #007700">}</span><span style="color: #DD0000">\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Type:text/plain;&nbsp;charset=\"iso-8859-1\"\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Transfer-Encoding:&nbsp;7bit\n\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_message'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"--&nbsp;\nFile&nbsp;sent&nbsp;with&nbsp;PHP&nbsp;Send&nbsp;File&nbsp;By&nbsp;Email\nhttp://frenchfragfactory.net/ozh/my-projects/php-send-file-by-email-sendmail-attachment/\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"(c)&nbsp;Ozh&nbsp;2005&nbsp;-&nbsp;http://planetozh.com\n\n"&nbsp;</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;PREPARE&nbsp;ATTACHMENT&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fileatt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">)&nbsp;;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fileatt_type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"application/octet-stream"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,</span><span style="color: #DD0000">"r</span><span style="color: #007700">${</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,</span><span style="color: #0000BB">filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">chunk_split</span><span style="color: #007700">(</span><span style="color: #0000BB">base64_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$email_message&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"--</span><span style="color: #007700">{</span><span style="color: #0000BB">$mime_boundary</span><span style="color: #007700">}</span><span style="color: #DD0000">\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Type:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$fileatt</span><span style="color: #007700">}</span><span style="color: #DD0000">;\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;name=\"</span><span style="color: #007700">{</span><span style="color: #0000BB">$fileatt</span><span style="color: #007700">}</span><span style="color: #DD0000">\"\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Content-Transfer-Encoding:&nbsp;base64\n\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"--</span><span style="color: #007700">{</span><span style="color: #0000BB">$mime_boundary</span><span style="color: #007700">}</span><span style="color: #DD0000">--\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;SEND&nbsp;FILE&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ok&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">mail</span><span style="color: #007700">(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'email_subject'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$email_message</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$headers</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">$ok</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;p&nbsp;class="info"&gt;File&nbsp;successfully&nbsp;sent!&lt;/p&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">logsend</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(</span><span style="color: #DD0000">'&lt;p&nbsp;class="error"&gt;&lt;b&gt;ERROR&lt;/b&gt;&nbsp;:&nbsp;could&nbsp;not&nbsp;send&nbsp;email.&lt;/p&gt;'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'deletefile'</span><span style="color: #007700">]&nbsp;and&nbsp;(</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ok</span><span style="color: #007700">=</span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$ok</span><span style="color: #007700">==</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;p&nbsp;class="error"&gt;&lt;b&gt;ERROR&lt;/b&gt;&nbsp;:&nbsp;could&nbsp;not&nbsp;delete&nbsp;file&nbsp;from&nbsp;server.&lt;/p&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;p&nbsp;class="info"&gt;File&nbsp;successfully&nbsp;deleted.&lt;/p&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">mirrorfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">])&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$log&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"info\"&gt;Mirroring&nbsp;file&nbsp;&lt;b&gt;</span><span style="color: #0000BB">$url</span><span style="color: #DD0000">&lt;/b&gt;&nbsp;...&lt;/p&gt;"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$log</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$msg&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;open&nbsp;source&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hfici</span><span style="color: #007700">=@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$url</span><span style="color: #007700">,</span><span style="color: #DD0000">"r</span><span style="color: #007700">${</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;woks&nbsp;fine&nbsp;?<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$hfici</span><span style="color: #007700">==</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;No&nbsp;:/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">=</span><span style="color: #DD0000">"&lt;b&gt;ERROR&lt;/b&gt;&nbsp;:&nbsp;couldn't&nbsp;read&nbsp;source&nbsp;file&nbsp;&lt;b&gt;</span><span style="color: #0000BB">$url</span><span style="color: #DD0000">&lt;/b&gt;."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Yes&nbsp;:&nbsp;create&nbsp;target&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hfico</span><span style="color: #007700">=@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_dir'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">],</span><span style="color: #DD0000">"w</span><span style="color: #007700">${</span><span style="color: #0000BB">sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;works&nbsp;fine&nbsp;?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$hfico</span><span style="color: #007700">==</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;No&nbsp;:/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$msg</span><span style="color: #007700">=</span><span style="color: #DD0000">"&lt;b&gt;ERROR&lt;/b&gt;&nbsp;:&nbsp;couldn't&nbsp;locally&nbsp;write&nbsp;file"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Yes&nbsp;:&nbsp;read&nbsp;remote&nbsp;and&nbsp;write&nbsp;local<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while(</span><span style="color: #0000BB">$buf</span><span style="color: #007700">=</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$hfici</span><span style="color: #007700">,</span><span style="color: #0000BB">1024</span><span style="color: #007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$hfico</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$buf</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$hfici</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$hfico</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$msg</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">"&lt;p&nbsp;class='error'&gt;</span><span style="color: #0000BB">$msg</span><span style="color: #DD0000">&lt;/p&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printform</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$log2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&lt;p&nbsp;class='info'&gt;File&nbsp;locally&nbsp;mirrored&nbsp;!&lt;/p&gt;&lt;p&nbsp;class='info'&gt;Preparing&nbsp;mail&nbsp;and&nbsp;attachment&nbsp;...&lt;/p&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$log2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;form&nbsp;method="post"&nbsp;action="'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&nbsp;name="form_send"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="remote"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'remote'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="local"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_dir'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'/'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'local'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="deletefile"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'deletefile'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="dest"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'dest'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="text"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'text'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="bintext"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'bintext'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="log"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$log&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$log2</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;name="action"&nbsp;value="send"&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//print&nbsp;'&lt;input&nbsp;type="submit"&gt;';<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">print&nbsp;</span><span style="color: #DD0000">'&lt;/form&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&lt;&lt;&lt;JS<br /></span><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.form_send.submit();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br /></span><span style="color: #007700">JS;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">printform</span><span style="color: #007700">()&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$sendfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'file_delete'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$checked_del&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'checked'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$checked_keep&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$checked_del&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$checked_keep&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'checked'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_this&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&lt;&lt;&lt;HTML<br /></span><span style="color: #DD0000">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id="box"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;id="form"&gt;&lt;legend&gt;&lt;a&nbsp;href="</span><span style="color: #0000BB">$_this</span><span style="color: #DD0000">"&gt;Send&nbsp;a&nbsp;File&lt;/a&gt;&lt;/legend&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;method="post"&nbsp;name="form_mirror"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="URL&nbsp;of&nbsp;a&nbsp;file.&nbsp;Can&nbsp;be&nbsp;a&nbsp;full&nbsp;url&nbsp;e.g.&nbsp;'http://host.com/file.exe',&nbsp;or&nbsp;a&nbsp;relative&nbsp;url&nbsp;from&nbsp;your&nbsp;own&nbsp;server,&nbsp;e.g.&nbsp;'file.zip'&nbsp;or&nbsp;'somedir/archive.rar'"&gt;&lt;span&nbsp;class="label"&gt;URL&nbsp;of&nbsp;file&nbsp;to&nbsp;send&lt;/span&gt;&lt;input&nbsp;class="wide"&nbsp;type="text"&nbsp;name="remote"&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="Optionnal.&nbsp;Do&nbsp;you&nbsp;want&nbsp;to&nbsp;rename&nbsp;the&nbsp;locally&nbsp;mirrored&nbsp;file&nbsp;?"&gt;&lt;span&nbsp;class="label"&gt;Rename&nbsp;this&nbsp;file&lt;/span&gt;&lt;input&nbsp;class="wide"&nbsp;type="text"&nbsp;name="local"&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="Is&nbsp;it&nbsp;a&nbsp;text&nbsp;file&nbsp;(.txt,&nbsp;.html&nbsp;...)&nbsp;or&nbsp;a&nbsp;binary&nbsp;file&nbsp;(an&nbsp;archive,&nbsp;a&nbsp;.exe,&nbsp;an&nbsp;image,&nbsp;....)&nbsp;?"&gt;&lt;span&nbsp;class="label"&gt;Binary&nbsp;or&nbsp;Text&nbsp;file&lt;/span&gt;&lt;input&nbsp;type="radio"&nbsp;name="bintext"&nbsp;value="b"&nbsp;id="bintext_b"&nbsp;checked&gt;&lt;label&nbsp;for="bintext_b"&gt;Binary&lt;/label&gt;&nbsp;&amp;mdash;&nbsp;&lt;input&nbsp;type="radio"&nbsp;name="bintext"&nbsp;value="t"&nbsp;id="bintext_t"&gt;&lt;label&nbsp;for="bintext_t"&gt;Text&lt;/label&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="After&nbsp;the&nbsp;file&nbsp;has&nbsp;been&nbsp;sended&nbsp;(successfully&nbsp;or&nbsp;not),&nbsp;do&nbsp;you&nbsp;want&nbsp;to&nbsp;delete&nbsp;the&nbsp;local&nbsp;copy&nbsp;?"&gt;&lt;span&nbsp;class="label"&gt;Delete&nbsp;locally&nbsp;mirrored&nbsp;file&lt;/span&gt;&lt;input&nbsp;type="radio"&nbsp;name="deletefile"&nbsp;value="1"&nbsp;id="radio_del"&nbsp;</span><span style="color: #0000BB">$checked_del</span><span style="color: #DD0000">&nbsp;&gt;&lt;label&nbsp;for="radio_del"&gt;Yes&lt;/label&gt;&nbsp;&amp;mdash;&nbsp;&lt;input&nbsp;type="radio"&nbsp;name="deletefile"&nbsp;value="0"&nbsp;id="radio_keep"&nbsp;</span><span style="color: #0000BB">$checked_keep</span><span style="color: #DD0000">&nbsp;&gt;&lt;label&nbsp;for="radio_keep"&gt;No&lt;/label&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="Enter&nbsp;recipient's&nbsp;email&nbsp;address"&gt;&lt;span&nbsp;class="label"&gt;Send&nbsp;file&nbsp;to&lt;/span&gt;&lt;input&nbsp;class="wide"&nbsp;&nbsp;type="text"&nbsp;name="dest"&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;title="Optionnal.&nbsp;Enter&nbsp;here&nbsp;any&nbsp;message&nbsp;you'd&nbsp;like&nbsp;to&nbsp;send&nbsp;along&nbsp;with&nbsp;the&nbsp;file"&gt;&lt;span&nbsp;class="label"&gt;Additionnal&nbsp;message&lt;/span&gt;&lt;textarea&nbsp;name="text"&gt;&lt;/textarea&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;class="label"&gt;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;input&nbsp;class="wide"&nbsp;&nbsp;type="submit"&nbsp;value="Send"&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="hidden"&nbsp;name="action"&nbsp;value="mirror"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/fieldset&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;id="ozh"&gt;&lt;a&nbsp;href="http://frenchfragfactory.net/ozh/my-projects/php-send-file-by-email-sendmail-attachment/"&gt;PHP&nbsp;Send&nbsp;File&nbsp;By&nbsp;Email&lt;/a&gt;&nbsp;by&nbsp;&lt;a&nbsp;href="http://planetOzh.com/"&gt;Ozh&lt;/a&gt;&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br /></span><span style="color: #007700">HTML;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">html</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&lt;&lt;&lt;HTML<br /></span><span style="color: #DD0000">&lt;html&gt;<br />&lt;head&gt;<br />&lt;title&gt;PHP&nbsp;Send&nbsp;File&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br />&lt;style&gt;<br />body&nbsp;{background:#EFDFCD;text-align:center;color:#111;font-family:verdana,arial;}<br />a,a:visited&nbsp;{color:brown;text-decoration:none}<br />a:hover{text-decoration:underline;}<br />#box{margin:0&nbsp;auto;margin-top:1em;padding:0.5em;width:580px;border:2px&nbsp;solid&nbsp;brown;text-align:justify}<br />#log{margin:0&nbsp;auto;margin-top:1em;padding:0.5em;width:580px;}<br />#form&nbsp;{padding:0.5em;color:brown}<br />#ozh&nbsp;{text-align:right;margin:0.2em&nbsp;0;font-size:0.8em}<br />p{font-family:verdana,arial}<br />p.error{color:red;border:2px&nbsp;solid&nbsp;white;kwidth:580px;padding:0.2em;margin:0.1em&nbsp;0}<br />p.info{color:green;border:2px&nbsp;solid&nbsp;silver;kwidth:580px;padding:0.2em;margin:0.1em&nbsp;0}<br />.kklabel{width=200px;text-align:right;margin-right:1em;background:white;}<br />.label{display:block;float:left;text-align:right;margin-right:1em;width:250px;clear:left;}<br />input,textarea,label{color:brown;font-family:verdana,arial;font-size:1em;}<br />input.wide,textarea{kwidth=50%;border:1px&nbsp;solid&nbsp;brown}<br />&lt;/style&gt;<br />&lt;div&nbsp;id="log"&gt;<br /></span><span style="color: #007700">HTML;<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code>